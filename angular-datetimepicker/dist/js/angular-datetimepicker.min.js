angular.module("ui.datetimepicker",["ngDatetime"]).directive("datetimepicker",["$timeout","dateTimeFactory",function(e,t){return{restrict:"EA",require:"ngModel",scope:{options:"="},link:function(e,a,i,r){a.wrap("<label class='angular-datetimepicker'></label>");var n=e.options||{};format="undefined"==typeof n.format?"yyyy-mm-dd":n.format,r.$formatters.push(function(e){return angular.isNumber(e)?t.format(new Date(e),format):e});var o={},m={};m.year=format.indexOf("yyyy")>=0,m.month=format.indexOf("mm")>=0,m.day=format.indexOf("dd")>=0,m.hour=format.indexOf("hh")>=0,m.mintue=format.indexOf("ii")>=0,m.second=format.indexOf("ss")>=0,o.fontAwesome=!0,o.format=format,o.autoclose=1,o.forceParse=0,o.bootcssVer=2,o.language="zh-CN",o.clearBtn=n.clearBtn!==!1,m.year&&(o.weekStart=1),m.day&&(o.todayBtn=1,o.todayHighlight=1),m.year||m.month||m.day||(o.startView=1,o.maxView=1,o.minView=0),m.hour&&!m.mintue&&!m.second&&m.year&&m.month&&m.day&&(o.startView=2,o.minView=1),!m.hour&&!m.mintue&&!m.second&&m.year&&m.month&&m.day&&(o.startView=2,o.minView=2),m.hour||m.mintue||m.second||!m.year||!m.month||m.day||(o.startView=3,o.minView=3),a.datetimepicker(o).on("hide",function(){$(a).blur()}),e.$watch("options.limitStartTime",function(e,i){e===i&&"undefined"==typeof i||a.datetimepicker("setStartDate",angular.isNumber(e)?t.format(new Date(e),"yyyy-mm-dd"):e)}),e.$watch("options.limitEndTime",function(e,i){e===i&&"undefined"==typeof i||a.datetimepicker("setEndDate",angular.isNumber(e)?t.format(new Date(e),"yyyy-mm-dd"):e)}),n.removeDatetimepicker=function(){a.datetimepicker("remove")}}}}]);